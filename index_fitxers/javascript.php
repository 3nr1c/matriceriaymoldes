
JSON.stringify=JSON.stringify||function(obj){var t=typeof(obj);if(t!="object"||obj===null){if(t=="string")obj='"'+obj+'"';return String(obj);}
else{var n,v,json=[],arr=(obj&&obj.constructor==Array);for(n in obj){v=obj[n];t=typeof(v);if(t=="string")v='"'+v+'"';else if(t=="object"&&v!==null)v=JSON.stringify(v);json.push((arr?"":'"'+n+'":')+String(v));}
return(arr?"[":"{")+String(json)+(arr?"]":"}");}};(function($){$.create=function(tag,attr){if(!tag){var tag='div';}
var element=$(document.createElement(tag));if(attr){for(var e in attr){if(/(text|html)/.test(e)){element.html(attr[e]);}else if(e==='css'){element.css(attr[e]);}else{element.attr(e,attr[e]);}}}
return element;};$.newWindow=function(attr){if($('.window').html()!=null){return setTimeout('$.newWindow('+JSON.stringify(attr)+')',200);}
var windowDiv=$.create('div').addClass('window');if(attr){for(var e in attr){if(e==='html'||e==='text'){windowDiv.html(attr[e]);}else if(e==='close'&&attr[e]){var closeButton=$.create('div',{text:'Cerrar'}).addClass('customButton').css({margin:'0px auto'});closeButton.click(function(e){$(windowDiv).fadeOut(200,function(){$(this).detach();});});windowDiv.append('<br/><br/>').append(closeButton);}else if(e==='accept'&&attr[e]){var acceptButton=$.create('div',{text:'Aceptar'}).addClass('customButton').css({margin:'0px auto'});if(!attr.acceptFunction||attr.acceptFunction==='default'){acceptButton.click(function(e){$(windowDiv).fadeOut(200,function(){$(this).detach();});});$(window).keypress(function(e){if(e.which===13){$(windowDiv).fadeOut(200,function(){$(this).detach();});}});}
windowDiv.append('<br/><br/>').append(acceptButton);}else if(e==='buy'&&attr[e]){var buyButton=$.create('a',{text:'MÃ¡s info',href:attr[e],target:'_blank'}).addClass('customButton').css({'text-decoration':'none','margin-right':'130px','margin-top':'-28px',float:'right','padding-right':'10px','width':'70px'});windowDiv.find('div.customButton').css({'margin-right':'60%'})
windowDiv.append(buyButton);}else if(e==='bool'&&attr[e]){var acceptButton=$.create('div',{text:'Aceptar'}).addClass('customButton').css({float:'right'}).data('text',attr['text']),denyButton=$.create('div',{text:'Cancelar'}).addClass('customButton').css({float:'left'}),buttonsWidth=$(acceptButton).width()*3,buttons=$.create('div').css({margin:'0px auto',width:buttonsWidth});$(buttons).append(denyButton).append(acceptButton);windowDiv.append('<br/><br/>').append(buttons);$(denyButton).click(function(e){e.preventDefault();$(windowDiv).fadeOut(200,function(){$(this).detach();});});$(acceptButton).click(function(e){e.preventDefault();$(windowDiv).fadeOut(200,function(){$(this).detach();});});}else if(e==='fadeOut'&&attr[e]){var fadeOutTime=attr[e];}else if(e==='css'){$(windowDiv).css(attr[e]);}else if(e==='width'){var w=attr[e];$(windowDiv).css({width:w-40,'margin-left':-(w/2)});}else if(e==='top'){var t=attr[e];$(windowDiv).css({top:t});}else{windowDiv.attr(e,attr[e]);}}}
if('url'in attr){$(windowDiv).prepend($.create('div',{css:{'overflow-x':'hidden','overflow-y':'auto'}}));$(windowDiv).find('div:first-child').text('Cargando...').load(attr.url,function(){var height=$(windowDiv).height()-60;$(this).css({height:height});$(window).resize(function(){var height=$(windowDiv).height()-60;$(windowDiv).find('div:first-child').css({'max-height':height});});});}
$('body').append(windowDiv);windowDiv.fadeIn(200);if(fadeOutTime){$(windowDiv).fadeOut(fadeOutTime,function(){$(this).detach();});return false;}
return $(acceptButton);};$.fn.tag=function(){return this.nodeName.toLowerCase();};})(jQuery);isEmail=function(str){if(!str){return false;}
var emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if(str.match(emailPattern)){return true;}
return false;};;var jUri=(function(window){if(!window.console){var log=window.opera?window.opera.postError:alert;window.console={log:function(str){log(str)}};window.console.error=window.console.warn=window.console.debug=window.console.log;}
var nav=window.navigator,appCodeName=nav.appCodeName,appName=nav.appName,appVersion=nav.appVersion,language=nav.language,mimeTypes=nav.mimeTypes,platform=nav.platform,plugins=nav.plugins,userAgent=nav.userAgent;window.jUriReady=function(callback){if(!document.body||!window.jUri){return setTimeout('window.jUriReady('+callback+')',1);}
callback();};(function(){jUriReady(function(){var links=document.getElementsByTagName('a');for(var e=0,l=links.length;e<l;e++){var link=links[e],after=link.getAttribute('data-after');if(after){jUri.fn.addEvent(link,'click',function(e){e.preventDefault();var href=this.href,after=this.getAttribute('data-after');jUri.redirect(href,after);});}}});})();(function(){jUriReady(function(){var all=document.getElementsByTagName('*');for(var e=0,l=all.length;e<l;e++){var el=all[e],hash=el.getAttribute('data-hash'),name=el.getAttribute('data-name');if(hash||hash==''){jUri.fn.addEvent(el,'click',function(e){var hash=this.getAttribute('data-hash');jUri.hash(hash);});}
if(name&&!jUri.anchorExists(name)){var anchor=document.createElement('a');anchor.name=name;el.parentNode.insertBefore(anchor,el);}}
jUri.anchorsCreated=true;});})();jUriReady(function(){if(jUri.anchorExists(jUri.hash())){var anchor=jUri.fn.getAnchor(jUri.hash()),top=0;if(anchor&&anchor.offsetParent){do{top+=anchor.offsetTop;}while(anchor=anchor.offsetParent);}
window.scrollTo(0,top);}});return{host:function(){return window.location.host;},hostname:function(){return window.location.hostname;},href:function(){return window.location.href;},pathname:function(){return window.location.pathname;},port:function(){return window.location.port;},protocol:function(){return window.location.protocol.replace(/:$/,'');},get:function(str){var getVars,e,json={};if(str&&str!==''){getVars=(str+'').replace(/^(.*?)\?/,'').split('&');for(e in getVars){var getParam=getVars[e].split('=');json[getParam[0]]=getParam[1];}}else{var obj=window.location.search,getStr=obj.replace(/^\?/,''),getVars=getStr.split('&');for(e in getVars){var getParam=getVars[e].split('=');json[getParam[0]]=getParam[1];}}
return json;},navigator:navigator,appCodeName:appCodeName,appName:appName,appVersion:appVersion,language:language,mimeTypes:mimeTypes,platform:platform,plugins:plugins,userAgent:userAgent,set:function(data,fallback,newState,a){var forceUrlChangeEvent,url,title,object;if(typeof fallback=='boolean'){forceUrlChangeEvent=fallback;}else{if(typeof fallback=='function'&&typeof newState=='boolean'){forceUrlChangeEvent=newState;newState=a;}
forceUrlChangeEvent=false;}
if(history.pushState){if(!newState)newState=true;if(typeof data=='string'){url=data;title='';object={};}else{object=data.data||{};title=data.title||'';url=data.url||'';}
try{if(history.current==url){return false;}}catch(e){}
if(title!=''){this.title(title);}
if(newState){history.pushState(object,title,url);}else{history.replaceState(object,title,url);}
if(!forceUrlChangeEvent){jUri.fn.jUriSet=true;}}else if(fallback&&typeof fallback=='function'){fallback();}},back:function(int,fallback){try{window.history.back(int);}catch(e){if(fallback)fallback();}},forward:function(int,fallback){try{window.history.forward(int);}catch(e){if(fallback)fallback();}},title:function(text,ms){if(typeof text=='string'){try{document.getElementsByTagName('title')[0].innerHTML=text.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');}
catch(e){document.title=text;}}
else if(typeof text=='object'){if(!ms)ms=1500;jUri.fx.changeTitle.init(text,ms);}
return{stop:function(str){jUri.fx.changeTitle.stop();if(str!=''){jUri.title(str);}}}},hash:function(text,callback){if(text&&text instanceof(RegExp)){if(window.location.hash.replace(/^#/,'').match(text)){callback?callback():false;return true;}else{return false;}}
else if(text||text==''){window.location.hash=text;return text;}
else{return window.location.hash.replace(/^#/,'');}},hashchange:function(callback){if(!document.body){return setTimeout('jUri.hashchange('+callback+')',1);}
var scroll=0;if(typeof window.pageYOffset=='number'){scroll=window.pageYOffset;}else if(document.body.scrollTop){scroll=document.body.scrollTop;}else if(document.documentElement.scrollTop){scroll=document.documentElement.scrollTop;}
if('onhashchange'in window){this.fn.addEvent(window,'hashchange',function(e){e.oldHash=e.oldURL.split('#')[1]||'#';e.newHash=e.newURL.split('#')[1]||'#';e.newLoc=window.location;callback(e);});}else{this.fn.checkhash(this.hash(),scroll,callback);}},urlchange:function(callback,fireOnHashChange,fireOnJUriSet){if(!document.body){return setTimeout('jUri.urlchange('+callback+','+fireOnHashChange+','+fireOnJUriSet+')',1);}
this.fn.checkurl(this.href(),callback,fireOnHashChange,fireOnJUriSet);},isHTTP:function(callback){if(this.protocol().match(/^http$/)){callback?callback():false;return true;}else{return false;}},isHTTPS:function(callback){if(this.protocol().match(/^https$/)){callback?callback():false;return true;}else{return false;}},parseAsGet:function(str){var getVars=(str+'').replace(/^(.*?)\?/,'').split('&'),json={};for(var e in getVars){var getParam=getVars[e].split('=');json[getParam[0]]=getParam[1];}
window.console.warn('jUri.parseAsGet(str) is deprecated, use jUri.get(str) instead')
return json;},redirect:function(uri,timeout){if(timeout&&timeout%1===0){setTimeout("window.location.href='"+uri+"'",timeout);}else{window.location.href=uri;}},reload:function(timeout){if(timeout&&timeout%1===0){setTimeout("window.location.reload(true);",timeout);}else{window.location.reload(true);}},isFile:function(callback){if(this.pathname().match(/\.(html|htm|php|phtml|asp|shtml|cgi|jsp|pl)$/i)){callback?callback():false;return true;}else{return false;}},anchorExists:function(name,callback){var anchor=this.fn.getAnchor(name);if(anchor){callback?callback(anchor):false;return true;}
return false;},anchorsCreated:false,animateAnchorLinks:function(anchors,changeHash){if(!document.body||!jUri.anchorsCreated){return setTimeout('jUri.animateAnchorLinks("'+anchors+'",'+changeHash+')',1);}
if(typeof anchors=='boolean'){anchors='*';changeHash=anchors;}
if(typeof changeHash!='boolean'){changeHash=true;}
var a=[],linkList=[],links=document.getElementsByTagName('a');if(!anchors||typeof anchors=='undefined'||anchors==='undefined'||anchors=='*'){for(var e in links){if(links[e].name&&links[e].name!=''){a.push(links[e].name);}}}else{var splitted=anchors.replace(/\s/gim,'').split(','),anchor;for(var e in splitted){anchor=splitted[e];a.push(this.fn.getAnchor(anchor).name);}}
for(var i in a){for(var e in links){if(links[e].href&&links[e].href!=''&&links[e].href.match('#'+a[i]+'$')){linkList.push(links[e]);}else if(links[e].href&&links[e].href.match(/#$/)){linkList.push(links[e]);}}}
linkList=this.fn.removeDuplicated(linkList);for(var i in linkList){jUri.fn.addEvent(linkList[i],'click',function(e){e.preventDefault();var anchorName=this.href.split('#')[1];jUri.fn.gotoAnchor(anchorName,function(){if(changeHash==true)jUri.hash(anchorName);});});}},encode:function(str){return encodeURIComponent(str);},bindToUrl:function(selectors){var elements=jUri.select(selectors),el,html;for(var e=0,l=elements.length;e<l;e++){el=elements[e];if(el&&!el.bound){html=el.innerHTML;el.urlCopies=[{url:jUri.href(),html:html}];el.bound=true;el.selector=jUri.fn.getSelector(el);var elLength=jUri.fn.boundElements.length;jUri.fn.boundElements[elLength]=el;}}
if(elements.length){jUri.urlchange(function(ev){for(var o in jUri.fn.boundElements){var el=jUri.fn.boundElements[o],copies=el.urlCopies,selector=el.selector,realElement=jUri.select(selector)[0];for(var i=0,l=copies.length;i<l;i++){if(copies[i].url==ev.newUrl){if(typeof copies[i].html=='string'){realElement.innerHTML=copies[i].html;}else if(typeof copies[i].AJAXurl=='string'){jUri.ajax({url:copies[i].AJAXurl,target:selector});}
break;}}}});jUri.urlchange(function(ev){for(var o in jUri.fn.boundElements){var el=jUri.fn.boundElements[o],saved=false,copies=el.urlCopies,length,selector=el.selector,realElement=jUri.select(selector)[0],html=realElement.innerHTML;for(var i=0,l=copies.length;i<l;i++){if(copies[i].url==ev.newUrl){saved=true;break;}}
if(!saved){length=copies.length;el.urlCopies[length]={url:ev.newUrl,html:html};}}},false,true);}
return;},ajax:function(data){if(typeof data=='object'){if(data.url){url=data.url;}else{return false;}
if(data.method){method=data.method;}else{method='GET';}
if(data.async){async=data.async;}else{async=true;}
if(data.callback&&typeof data.callback=='function'){callback=data.callback;}else{callback=new Function();}
if(data.form&&typeof data.form=='string'){form=jUri.select(data.form)[0];}else if(data.form&&typeof data.form=='object'){form=data.form;}else{form=false;}}else if(typeof data=='string'){url=data;method='GET';async=true;}else{return false;}
var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}else if(window.ActiveXObject){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");}}
if(form){xmlhttp.open('POST',url,async);}else{xmlhttp.open(method,url,async);}
if(typeof data=='string')return xmlhttp;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){if(data.target){var targets=jUri.select(data.target),response=xmlhttp.responseText,tl=targets.length;if(data.bindToUrl){jUri.bindToUrl(data.target);}
for(var i=0;i<tl;i++){targets[i].innerHTML=response;}}
if(data.setUrl){var forceEvent=foundScript=false;for(var i=0;i<tl;i++){foundScript=(function(html){return/<script[^>]*>(.|\n|\t)*?<\/script>/gim.test(html);})(targets[i].innerHTML);if(targets[i].innerHTML.length>1024&&!foundScript){forceEvent=true;break;}}
if(data.bindToUrl&&data.target&&forceEvent){jUri.set(data.setUrl,true);}else{jUri.set(data.setUrl);}}
if(data.target&&forceEvent){var boundElementsLength=jUri.fn.boundElements.length;for(var i=0;i<tl;i++){var el=jUri.fn.boundElements[boundElementsLength-(tl-i)],has_copy=false,copies;if(!el.urlCopies)el.urlCopies=[];copies=el.urlCopies;for(var e=0,l=el.urlCopies.length;e<l;e++){if(copies[e].AJAXurl&&copies[e].AJAXurl==url){has_copy=true;break;}}
if(has_copy==true)continue;el.urlCopies.push({url:jUri.href(),AJAXurl:url});jUri.fn.boundElements[boundElementsLength-(tl-i)]=el;}}
if(data.response){response=data.response.toLowerCase();}else{response='html';}
if(response=='json'){try{responseText=eval('('+xmlhttp.responseText+')');}catch(e){responseText={};}}else{responseText=xmlhttp.responseText;}
callback(responseText);}};if(form){var formdata,uA=jUri.userAgent.toLowerCase(),isChrome=/\bchrome\b/i.test(uA),isSafari=!isChrome&&/safari/.test(uA);if(window.FormData&&!isSafari){formdata=new FormData(form);}
else{xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var children,i,l,child,formdata='';children=form.childNodes;for(i=0,l=children.length;i<l;i++){if(typeof children[i]!='object'||(children[i].tagName==null&&children[i].localName==null)){continue;}
child=children[i];if(child.getAttribute('name')&&child.getAttribute('type')!='file'){var name=child.getAttribute('name'),value=child.value;if(formdata!='')formdata+='&'
formdata+=name+'='+jUri.encode(value);}}}
xmlhttp.send(formdata);}else{xmlhttp.send(null);}
return xmlhttp;},select:function(selectors){try{var elements=document.querySelectorAll(selectors);}catch(e){var separated=selectors.split(','),selector,elements=[],deleteTextNodes=function(nodeList){var elements=[];for(var e=0,l=nodeList.length;e<l;e++){if(typeof nodeList[e]!='object'||(nodeList[e].tagName==null&&nodeList[e].localName==null)){continue;}
elements.push(nodeList[e]);}
return elements}
nth_child=function(element){var parent=element.parentNode,children=deleteTextNodes(parent.childNodes);for(var e=0,l=children.length;e<l;e++){if(element==children[e]){return e+1==l?-1:e+1;}}},nth_last_child=function(element){var parent=element.parentNode,children=deleteTextNodes(parent.childNodes).reverse();for(var e=0,l=children.length;e<l;e++){if(element==children[e]){return e+1;}}};for(var i=0,l=separated.length;i<l;i++){if(typeof separated[i]=='undefined')continue;selector=separated[i].replace(/^\s*/,'').replace(/\s*$/,'');if(!/^[^\s]+\s+[^\s]+$/.test(selector)&&!/^[^\s]+\s*>\s*[^\s]+$/.test(selector)){var attrConditionals=/\[.*?\]/gim.exec(selector)||[],pseudoClass=selector.split(':')[1]||'',css2selector=selector.split('[')[0].split(':')[0]||'*',id=undefined;if(/^[a-zA-Z]*(\.[a-zA-Z0-9_-]+)*$/.test(css2selector)||/^\*$/.test(css2selector)){var classes=css2selector.split('.').slice(1),tag=css2selector.split('.')[0],els=document.getElementsByTagName(tag),tl=els.length;if(tag==''){els=document.getElementsByTagName('*');tl=els.length;tag='*';}
if(classes!=null){for(var c=0,cLen=classes.length;c<cLen;c++){attrConditionals.push('[class~="'+classes[c]+'"]');}}}
else if(/^[a-zA-Z]*#[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)*$/.test(css2selector)){var parts=css2selector.split('#'),tagname=parts[0]||'',id=parts[1].split('.')[0],classes=parts[1].split('.').slice(1),els=document.getElementById(id),tl=1,elTag=els.localName||els.tagName;if(classes!=null){for(var c=0,cLen=classes.length;c<cLen;c++){attrConditionals.push('[class~="'+classes[c]+'"]');}}
if(els==null)continue;if(tagname!=''&&elTag!=tagname){continue;}}
for(var e=0;e<tl;e++){var pushToElements,el,tag;if(typeof id!='undefined'){el=els;}else{el=els[e];}
tag=el.tagName||el.localName;if(attrConditionals==null){pushToElements=true;}else{for(var a=0,atLen=attrConditionals.length;a<atLen;a++){var attrCondition=attrConditionals[a].replace(/^\[/,'').replace(/\]$/,'');if(/^[a-zA-Z]+$/.test(attrCondition)){if(el.getAttribute(attrCondition)!=null){pushToElements=true;}else{pushToElements=false;}}
else if(/^[a-zA-Z]+=('[^']*'|"[^"]*")$/.test(attrCondition)){var attr=attrCondition.split('=')[0],value=attrCondition.split('=')[1].replace(/^['"]/,'').replace(/['"]$/,'');if(el.getAttribute(attr)==value){pushToElements=true;}else{pushToElements=false;}}
else if(/^[a-zA-Z]+~=('[^']*'|"[^"]*")$/.test(attrCondition)){if(el.getAttribute(attrCondition.split('~=')[0])!=null){var value=el.getAttribute(attrCondition.split('~=')[0]),match=attrCondition.split('~=')[1].replace(/^['"]/,'').replace(/['"]$/,''),regexp=new RegExp('(^|\\s)'+match+'(\\s|$)');if(match!=''&&regexp.test(value)){pushToElements=true;}else{pushToElements=false;}}else{pushToElements=false;}}
else if(/^[a-zA-Z]+\^=('[^']*'|"[^"]*")$/.test(attrCondition)){if(el.getAttribute(attrCondition.split('^=')[0])!=null){var value=el.getAttribute(attrCondition.split('^=')[0]),match=attrCondition.split('^=')[1].replace(/^['"]/,'').replace(/['"]$/,''),regexp=new RegExp('^'+match);if(match!=''&&regexp.test(value)){pushToElements=true;}else{pushToElements=false;}}else{pushToElements=false;}}
else if(/^[a-zA-Z]+\$=('[^']*'|"[^"]*")$/.test(attrCondition)){if(el.getAttribute(attrCondition.split('$=')[0])!=null){var value=el.getAttribute(attrCondition.split('$=')[0]),match=attrCondition.split('$=')[1].replace(/^['"]/,'').replace(/['"]$/,''),regexp=new RegExp(match+'$');if(match!=''&&regexp.test(value)){pushToElements=true;}else{pushToElements=false;}}else{pushToElements=false;}}
else if(/^[a-zA-Z]+\*=('[^']*'|"[^"]*")$/.test(attrCondition)){if(el.getAttribute(attrCondition.split('*=')[0])!=null){var value=el.getAttribute(attrCondition.split('*=')[0]),match=attrCondition.split('*=')[1].replace(/^['"]/,'').replace(/['"]$/,''),regexp=new RegExp(match);if(match!=''&&regexp.test(value)){pushToElements=true;}else{pushToElements=false;}}else{pushToElements=false;}}
else if(/^[a-zA-Z]+\|=('[^']*'|"[^"]*")$/.test(attrCondition)){if(el.getAttribute(attrCondition.split('|=')[0])!=null){var value=el.getAttribute(attrCondition.split('|=')[0]),match=attrCondition.split('|=')[1].replace(/^['"]/,'').replace(/['"]$/,''),regexp=new RegExp('^'+match+'-');if(match!=''&&regexp.test(value)){pushToElements=true;}else{pushToElements=false;}}else{pushToElements=false;}}}}
if(pseudoClass=='root'){if(tag=='html'){pushToElements=true;}else{pushToElements=false}}
else if(pseudoClass=='first-child'){if(nth_child(el)==1){pushToElements=true;}else{pushToElements=false}}
else if(pseudoClass=='last-child'){if(nth_child(el)==-1){pushToElements=true;}else{pushToElements=false}}
else if(/^nth-child\(\d+\)$/.test(pseudoClass)){if(nth_child(el)==/\d+/.exec(pseudoClass)){pushToElements=true;}else{pushToElements=false}}
else if(/^nth-last-child\(\d+\)$/.test(pseudoClass)){if(nth_last_child(el)==/\d+/.exec(pseudoClass)){pushToElements=true;}else{pushToElements=false}}
else if(/^only-child$/.test(pseudoClass)){if(deleteTextNodes(el.parentNode).length==1){pushToElements=true;}else{pushToElements=false}}
if(typeof pushToElements!='boolean'){pushToElements=true;}
if(pushToElements){try{var exists=false;for(var o=0,len=elements.length;o<len;o++){if(elements[o]==el){exists=true;break;}}
if(exists)continue;}catch(e){}
elements.push(el);}}
continue;}}}
elements=jUri.fn.DOMprototype.createPrototype(elements);return elements;},fn:{checkhash:function(str,prevScroll,callback){if(jUri.hash()!=str){callback(new hashChangeEvent(str,jUri.hash(),prevScroll));var prevScroll=0;if(typeof window.pageYOffset=='number'){scroll=window.pageYOffset;}else if(document.body.scrollTop){scroll=document.body.scrollTop;}else if(document.documentElement.scrollTop){scroll=document.documentElement.scrollTop;}}
setTimeout('jUri.fn.checkhash("'+jUri.hash()+'",'+prevScroll+','+callback+')',1);},jUriSet:false,checkurl:function(str,callback,fireOnHashChange,fireOnJUriSet){if(jUri.href()!=str){if(!fireOnJUriSet){if(jUri.fn.jUriSet){jUri.fn.jUriSet=false;return setTimeout('jUri.fn.checkurl("'+jUri.href()+'",'+callback+','+fireOnHashChange+','+fireOnJUriSet+')',1);}}else{jUri.fn.jUriSet=false;}
if(!fireOnHashChange){if(jUri.href().split('#')[0]==str.split('#')[0]){return setTimeout('jUri.fn.checkurl("'+jUri.href()+'",'+callback+','+fireOnHashChange+','+fireOnJUriSet+')',1);}}
callback(new urlChangeEvent(str,jUri.href()));}
setTimeout('jUri.fn.checkurl("'+jUri.href()+'",'+callback+','+fireOnHashChange+','+fireOnJUriSet+')',1);},pageScroll:function(to,callback){if(!document.body){return setTimeout('jUri.fn.pageScroll('+to+')',1);}
jUri.fx.scroller.scrollTo(to,callback);},getAnchor:function(hash){if(!document.body){return setTimeout('jUri.fn.getAnchor('+hash+')',1);}
if(!hash){return null;}
if(hash.match(/^#/))hash=hash.replace(/^#/,'');var links=document.getElementsByTagName('a');for(var e in links){element=links[e];if(element.name&&element.name.replace(/^#/,'')===hash){return element;}}
return null;},gotoAnchor:function(name,callback){var anchor=jUri.fn.getAnchor(name),top=0;if(anchor&&anchor.offsetParent){do{top+=anchor.offsetTop;}while(anchor=anchor.offsetParent);}
jUri.fn.pageScroll(top,callback);},removeDuplicated:function(arrayName,filterBy){var newArray=new Array();if(typeof filterBy=='undefined'){label:for(var i in arrayName){for(var j in newArray){if(newArray[j]==arrayName[i])continue label;}
newArray[newArray.length]=arrayName[i];}}else{label:for(var i in arrayName){for(var j in newArray){if(newArray[j][filterBy]==arrayName[i][filterBy])continue label;}
newArray[newArray.length]=arrayName[i];}}
return newArray;},addEvent:(function(){if(document.addEventListener){return function(el,type,fn){if(el&&el.nodeName||el===window){el.addEventListener(type,fn,false);}else if(el&&el.length){for(var i=0;i<el.length;i++){jUri.fn.addEvent(el[i],type,fn);}}};}else{return function(el,type,fn){if(el&&el.nodeName||el===window){el.attachEvent('on'+type,function(){return fn.call(el,window.event);});}else if(el&&el.length){for(var i=0;i<el.length;i++){jUri.fn.addEvent(el[i],type,fn);}}};}})(),css3Selectors:(function(document){try{document.querySelectorAll('html:nth-child(1)');return true}catch(e){return false;}})(window.document),getSelector:function(element){var tagname=element.localName||element.tagName.toLowerCase(),id=element.getAttribute('id'),elementParent=element.parentNode,checkChildhood=function(element,selector){var others,last,tagname=element.localName||element.tagName.toLowerCase(),e=0,sufix,others=jUri.select(selector),last=others.length-1;if(others.length==1){return selector;}
for(var i=0,l=others.length;i<l;i++){if((element==others[i]&&'\v'!='v')||('\v'=='v'&&element.innerHTML==others[i].innerHTML)){if(i==0){selector+=':first-of-type';}else if(i==last){selector+=':last-of-type';}else if(jUri.fn.css3Selectors===true){selector+=':nth-of-type('+(i+1)+')';}else{var add='';while(e<i){add+=' + '+tagname;e++}
selector+=add;}
break;}}
if(jUri.select(selector).length==1||'\v'=='v'){return selector;}},selector=tagname;if(jUri.select(selector).length==1){return selector;}
var others,last;if(typeof id=='string'&&id!=''){var others=jUri.select(id),last=others.length-1;selector+='#'+id;if(jUri.select(selector).length==1){return selector;}}
return checkChildhood(element,selector);},boundElements:[],DOMprototype:{createPrototype:function(elements){var prot=jUri.fn.DOMprototype;elements.addClass=prot.addClass;elements.removeClass=prot.removeClass;elements.hasClass=prot.hasClass;elements.toggleClass=prot.toggleClass;elements.click=prot.click;return elements;},addClass:function(cls){var elements=this,l=elements.length,i;for(i=0;i<l;i++){var el=elements[i];el.className+=cls;}
return this;},removeClass:function(cls){var elements=this,l=elements.length,i;for(i=0;i<l;i++){var el=elements[i],match=new RegExp('(^|\\s)'+cls+'(\\s|$)');el.className=el.className.replace(match,'');}
return this;},hasClass:function(cls){var elements=this,l=elements.length,i,hC=true;for(i=0;i<l;i++){var el=elements[i],match=new RegExp('(^|\\s)'+cls+'(\\s|$)');hC=match.test(el.className);if(!hC)return false;}
return true;},toggleClass:function(cls){var elements=this,l=elements.length,i;for(i=0;i<l;i++){var el=elements[i],match=new RegExp('(^|\\s)'+cls+'(\\s|$)');if(match.test(el.className)){el.className=el.className.replace(match,'');}else{el.className+=cls;}}
return this;},click:function(callback){var elements=this,l=elements.length,i;for(i=0;i<l;i++){var el=elements[i];jUri.fn.addEvent(el,'click',callback);}
return this;}}},fx:{scroller:{stepIncrement:20,stepDelay:1,limit:6000,running:false,nextStep:null,killTimeout:null,finalPoint:null,callback:null,scrollStep:function(to,dest,down){var stepIncrement=jUri.fx.scroller.stepIncrement,running=jUri.fx.scroller.running;if(!running||(down&&to>=dest)||(!down&&to<=dest)){jUri.fx.scroller.killScroll();return;}
if((down&&to>=(dest-(2*stepIncrement)))||(!down&&to<=(dest-(2*stepIncrement)))){stepIncrement=stepIncrement*.55;}
window.scrollTo(0,to);jUri.fx.scroller.nextStep=jUri.fx.scroller.callNext(+to+stepIncrement,dest,down);jUri.fx.scroller.stepIncrement=stepIncrement;window.setTimeout(jUri.fx.scroller.nextStep,jUri.fx.scroller.stepDelay);},callNext:function(to,dest,down){return function(){jUri.fx.scroller.scrollStep(to,dest,down);};},scrollTo:function(yCoord,callback){if(jUri.fx.scroller.running)return false;jUri.fx.scroller.running=true;jUri.fx.scroller.callback=callback;jUri.fx.scroller.finalPoint=yCoord;var currentYPosition=(document.all)?document.body.scrollTop:window.pageYOffset,down=true,stepIncrement=jUri.fx.scroller.stepIncrement;if(currentYPosition==yCoord){jUri.fx.scroller.killScroll();}
if(currentYPosition>yCoord){stepIncrement*=-1;down=false;}
jUri.fx.scroller.killTimeout=window.setTimeout(jUri.fx.scroller.killScroll,jUri.fx.scroller.limit);jUri.fx.scroller.stepIncrement=stepIncrement;jUri.fx.scroller.scrollStep(currentYPosition+stepIncrement,yCoord,down);},killScroll:function(){window.clearTimeout(jUri.fx.scroller.killTimeout);jUri.fx.scroller.running=false;jUri.fx.scroller.stepIncrement=20;window.scrollTo(0,jUri.fx.scroller.finalPoint);jUri.fx.scroller.finalPoint=null;typeof jUri.fx.scroller.callback=='function'?jUri.fx.scroller.callback():false;jUri.fx.scroller.callback=null;}},changeTitle:{active:false,obj:[],current:0,timeNext:1500,timeOut:null,init:function(obj,ms){if(jUri.fx.changeTitle.active)return false;jUri.fx.changeTitle.active=true;jUri.fx.changeTitle.obj=obj;jUri.fx.changeTitle.timeNext=ms;jUri.fx.changeTitle.callNext();},callNext:function(){var n=jUri.fx.changeTitle.current,obj=jUri.fx.changeTitle.obj,time=jUri.fx.changeTitle.timeNext;if(obj[n]){jUri.title(obj[n]);jUri.fx.changeTitle.current=n+1;}else{jUri.title(obj[0]);jUri.fx.changeTitle.current=0;}
jUri.fx.changeTitle.timeOut=setTimeout(jUri.fx.changeTitle.callNext,time);},stop:function(){jUri.fx.changeTitle.active=false;jUri.fx.changeTitle.obj=false;jUri.fx.changeTitle.current=false;jUri.fx.changeTitle.timeNext=1500;window.clearTimeout(jUri.fx.changeTitle.timeOut);}},},log:function(str){console.log(str);},debug:function(str){console.debug(str);},warn:function(str){console.warn(str);},error:function(str){console.error(str);},short:function(varname){window[varname]=jUri;}}})(window),hashChangeEvent=function(prevHash,newHash){this.oldHash=prevHash||"#";this.newHash=newHash||"#";this.oldURL=history.previous||"";this.newURL=jUri.href()||"";this.newLoc=window.location;};urlChangeEvent=function(prevUrl,newUrl){this.oldUrl=prevUrl||"#";this.newUrl=newUrl||"#";this.newLoc=window.location;};window.jUri=jUri;;jUri.hash(/^!\//,function(){jUri.redirect(jUri.hash().replace('!',''))});if(jUri.pathname().match(/\/pdf\/(.*?)\.pdf$/)){var artName=jUri.pathname().split('/pdf/')[1],fullName;artName=artName.split('.')[0].toLowerCase();artName=artName.replace(/_/gim,'-');fullName='/recursos/articulos/'+artName;jUri.redirect(fullName);};$(document).ready(function(){if($('a.mainNode').length>0){var section=$('#mainSection');$('.treeNode').find('.folder_icon').click(function(e){e.preventDefault();openNode('folder_icon',this);});$('.treeNode').find('.mainNode').click(function(e){e.preventDefault();openNode('mainNode',this);});}
window.openedRequests=[];function openedRequest(folder){var opened=window.openedRequests,l=opened.length,i;for(i=0;i<l;i++){if(opened[i]==folder){return true;}}
return false;}
function removeOpenedRequest(folder){}
function openNode(from,object){var csspath='',actNode=$(object).parent().find('a.mainNode, a.subNodeLink'),actIcon=$(object).parent().find('div').attr('class'),href='/content'+actNode.attr('href');if(/aulaonline/i.test(jUri.pathname())){href=actNode.attr('href');}
if(!actNode.length)actNode=$(object).parent().find('a.subNodeLink');jUri.isFile(function(){var slash=/\//gi,uri=jUri.pathname().replace(/^\/?/,""),levels=uri.match(slash).length;if(uri.match(/\/[^\/\.]+$/))$levels+=1;for(i=0;i<levels;i++)csspath+="../"
csspath=csspath.replace(/\/$/,'');});if(actIcon=='folder_icon'){var folder=href.replace(/\/([^./]+)\.([^./]+)$/,'/'),folderName=(actNode.html()+'').toLowerCase(),subNode=$(object).parent().find('div[id^="'+folderName+'_node"]');if(subNode.length<=0){if(openedRequest(folder)){return false;}
window.openedRequests.push(folder);$.ajax({url:'/ajax/dirtree.php',dataType:'json',type:'POST',data:{'folder':folder,'request_uri':jUri.pathname()},success:function(data){for(var i=0,k=0,len=window.openedRequests.length>>>0;i<len;i++){if(k>0)window.openedRequests[i-k]=arr[i];if(window.openedRequests[i]===folder)k++;}
for(;k--;)window.openedRequests.pop();if(data&&data.length){var n=0;do{var id=folderName+'_node'+n,o=$('#'+id).length;if(o<=0)break;}while(n=n+1);var nodeGroup=$.create('div',{id:id});for(var e=0,l=data.length;e<l;e++){var nodeType=data[e].nodeType,nodeName=data[e].nodeName,nodePath=data[e].nodePath,nodeDiv=$.create().addClass('subTreeNode'),nodeImage=$.create().addClass(nodeType+'_icon'),nodeHref=(nodePath.replace(/(\/?(var)?\/?(www)?\/?(ww1)?\/?(content)?\/?)*/,'')),nodeHref=(nodeHref.replace(/(\/?(usr)?\/?(home)?\/?(matriceriaymoldes.es)?\/?(web)?\/?(content)?\/?)*/,'')),nodeHref=(nodeHref.replace(/(\/?(C:)?\\?(www)?\\?(ww1)?\\?(content)?\\?)*/,'')),nodeLink;if(nodeType=='video'){nodeLink=$('<a href="'+nodeHref+'" class="videoLink" target="_blank">'+nodeName+'</a>');nodeLink.attr('data-footer',data[e].nodeFooter);nodeLink.attr('data-web',data[e].nodeWeb);nodeLink.click(function(e){openVideo(e,$(this));});}else if(!/aulaonline/i.test(jUri.pathname())){nodeLink='<a href="/'+nodeHref+'" class="subNodeLink">'+nodeName+'</a>';}else{nodeName=nodeName.replace(/^_/,'(oculto) ');nodeLink='<a href="/'+nodeHref+'" class="subNodeLink" target="_blank">'+nodeName+'</a>';if(/\(oculto\) /.test(nodeName)){nodeLink+='<span class="sep"> | </span><a href="javascript:;" class="make_visible">Hacer visible para todos</a>';}}
nodeDiv.append(nodeImage);nodeDiv.append(nodeLink);nodeGroup.append($(nodeDiv));$('a.make_visible').click(function(e){e.preventDefault();});}
nodeGroup.find('a, .folder_icon').click(function(e){if(!/aulaonline/i.test(jUri.pathname()))e.preventDefault();if(/aulaonline/i.test(jUri.pathname())&&$(this)[0].tagName.toLowerCase()=='a'&&$(this).parent().find('div').hasClass('folder_icon')){e.preventDefault();}
if(/aulaonline/i.test(jUri.pathname())&&$(this)[0].tagName.toLowerCase()=='a'&&$(this).hasClass('make_visible')){var make_visible_prompt=confirm('Hacer visible este archivo para todos los usuarios de este curso?');if(make_visible_prompt){var subNodeLink=$(this).parent().find('a')[0],file=$(subNodeLink).attr('href');$.ajax({url:'/ajax/make_visible.php',dataType:'json',type:'POST',data:{src:file},success:function(data){if(data.s=='success'){$(subNodeLink).parent().find('a')[1].remove();var innerHTML=$(subNodeLink).text();innerHTML=innerHTML.replace('(oculto) ','');$(subNodeLink).text(innerHTML).attr('href',data.new_url);$(subNodeLink).parent().find('span.sep').remove();alert('El archivo estÃ¡ disponible para todos los alumnos del curso.');}}});}}
var nodeClass=$(this).attr('class');openNode(nodeClass,$(this))});nodeGroup.css('display','none')
actNode.parent().append($(nodeGroup));$(nodeGroup).toggle(400);}else if(data.length==0){}},error:function(){$.newWindow({text:'Ha habido un error, intÃ©ntalo mÃ¡s tarde',accept:true});}});}else{$('#current-video').remove();var node=subNode;node.toggle(400);}}
if(from=='mainNode'||from=='subNodeLink'){if(!/aulaonline/i.test(jUri.pathname())&&$(section).data('currentPage')!=href){window.loading.on();$.ajax({url:href,cache:false,dataType:'text',type:'POST',success:function(data){if($(section).html()!=data||false){$(section).html(data);var newUrl;if(jUri.pathname().replace(/\/content/,'')!=href.replace(/\/content/,'')){newUrl=(href.replace(/\/content/,''));}else{newUrl='';}
newUrl=newUrl.replace(/&/,"%2526");jUri.set(newUrl,function(){jUri.hash('!'+newUrl);});}
$(section).data('currentPage',href);window.loading.off();var new_title=$(section).find('hgroup>h1').text();if(new_title&&new_title!=''){jUri.title('MatricerÃ­a y Moldes - '+new_title);}else{jUri.title('MatricerÃ­a y Moldes')}
$('#mainSection').bind('dragstart selectstart mousedown',function(e){e.preventDefault();return false;});},error:function(){window.loading.off();}});}}}});function openVideo(event,that){if(/aulaonline/i.test(jUri.pathname())||that.parent().hasClass('videoNode')){event.preventDefault();if($('#current-video').length>0){if($('#current-video .embed-container').find('iframe').attr('src')==that.attr('href')){$('#current-video').remove();return false;}
$('#current-video').remove();}
var container=$(document.createElement('div')),video,close,footer=web='';if(that.attr('data-footer')!=''&&typeof that.attr('data-footer')!='undefined'){footer=that.attr('data-footer');footer=$('<p class="separat-dalt">'+footer+'</p>');if(that.attr('data-web')!=''){web=that.attr('data-web');web=$('<div class="video-web"><a href="'+web+'" target="_blank">Ir a la web</a></div>');}}
container.addClass('video-container');container.attr('id','current-video');var href=that.attr('href');if(href!='#'&&href!=''){video=$('<div class="embed-container"><iframe width="560" height="315" src="'+
that.attr('href')
+'" frameborder="0"></iframe></div>');}else if(that.attr('data-embed')){console.log(that.attr('data-embed'))
video=$('<div class="embed-container">'+that.attr('data-embed')+'</div>');}
container.append(video).append(footer).append(web);that.after(container);}}
$(document).ready(function(){$('a[href*="/pages/"]').click(function(e){if($(this).hasClass('no-script')){return true;}
e.preventDefault();window.loading.on();var raw_href=$(this).attr('href'),href='/content'+raw_href.replace(/(recursos|empresas)\//,'')+'.php',page=raw_href.split('pages/')[1],raw_href_parts,cb=function(){jUri.set('/recursos/pages/'+page);window.loading.off();var new_title=$('#mainSection').find('hgroup>h1').text();if(new_title&&new_title!=''){jUri.title('MatricerÃ­a y Moldes - '+new_title);}else{jUri.title('MatricerÃ­a y Moldes')}};if(raw_href.match(/hemeroteca/gim)){raw_href_parts=raw_href.split('/');href='/content/pages/hemeroteca.php?n='+raw_href_parts[4];if(raw_href_parts[5]!=undefined){href+='&from='+raw_href_parts[5];}
cb=function(){$('.noticia, .post_blog, div.fb_icon').unbind();$.getScript('/js/noticias.js');jUri.set('/recursos/pages/'+page);window.loading.off();var new_title=$('#mainSection').find('hgroup>h1').text().replace(/<br\/?>/,' ');if(new_title&&new_title!=''){jUri.title('MatricerÃ­a y Moldes - '+new_title);}else{jUri.title('MatricerÃ­a y Moldes')}};}
$('.box500 section').load(href,cb);});$('a[href*="/articulos/"]').click(function(e){if($(this).hasClass('no-script')){return true;}
e.preventDefault();window.loading.on();var href='/content'+$(this).attr('href').replace(/(recursos|empresas)\//,'').replace(/-/gim,'_')+'.php',page=$(this).attr('href').split('articulos/')[1];$('.box500 section').load(href,function(){jUri.set('/recursos/articulos/'+page);window.loading.off();var new_title=$('#mainSection').find('hgroup>h1').text().replace(/<br\/?>/,' '),h2=$('#mainSection').find('h2')[0]||$('#sgjfagrjsbgu');if(new_title&&new_title!=''){if($(h2).length==1&&/^lecci(Ã³)n/i.test($(h2).text())){jUri.title('MatricerÃ­a y Moldes - '+new_title+' - '+$(h2[0]).text());}else{jUri.title('MatricerÃ­a y Moldes - '+new_title);}}else{jUri.title('MatricerÃ­a y Moldes')}});});$('.close-ad').click(function(e){e.preventDefault();$(this).parent().css({overflow:'hidden'}).animate({height:'0px','padding-top':'0px','padding-bottom':'0px'},400,'swing',function(){$(this).remove();});});});$(window).load(function(){function popHref(str){var href=str.split('/');href.pop();href=href.join('/');return href;}
var href=jUri.pathname();window.tryes=[];do{if(!/\/(recursos|empresas)\//.test(href)||/\/(recursos|empresas)\/(pages)/.test(href))break;tryes.push(href);}while(href=popHref(href));window.tryes.reverse();function continueLoop(){for(var i in window.tryes){var str=window.tryes.shift();if($('a[href="'+str+'/index.php"]').length>0){$('a[href="'+str+'/index.php"]').parent().find('.folder_icon').click().ajaxComplete(function(){continueLoop();});break;}}}
continueLoop();});;$(document).ready(function(){var userAgent=window.navigator.userAgent;if(!(/(ipod|iphone|ipad)/gim.test(userAgent))){$(window).scroll(function(){if(-($('html, body').offset().top)>100){$('#scrollTop').fadeIn('fast');}else{$('#scrollTop').fadeOut('fast');}});if($('#scrollTop').html()==null){var scrollDiv=$.create('div',{id:'scrollTop',text:'Arriba'});$('#content').append(scrollDiv);}
$('#scrollTop').click(function(){$('body, html').animate({scrollTop:0},800);if(jUri.parseAsGet(jUri.hash()).noticia)jUri.hash('#!');});}});;(function(a,b){function E(a){if(e==="")return a;a=a.charAt(0).toUpperCase()+a.substr(1);return e+a}var c=Math,d=b.createElement("div").style,e=function(){var a="t,webkitT,MozT,msT,OT".split(","),b,c=0,e=a.length;for(;c<e;c++){b=a[c]+"ransform";if(b in d){return a[c].substr(0,a[c].length-1)}}return false}(),f=e?"-"+e.toLowerCase()+"-":"",g=E("transform"),h=E("transitionProperty"),i=E("transitionDuration"),j=E("transformOrigin"),k=E("transitionTimingFunction"),l=E("transitionDelay"),m=/android/gi.test(navigator.appVersion),n=/iphone|ipad/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),p=E("perspective")in d,q="ontouchstart"in a&&!o,r=!!e,s=E("transition")in d,t="onorientationchange"in a?"orientationchange":"resize",u=q?"touchstart":"mousedown",v=q?"touchmove":"mousemove",w=q?"touchend":"mouseup",x=q?"touchcancel":"mouseup",y=e=="Moz"?"DOMMouseScroll":"mousewheel",z=function(){if(e===false)return false;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return a[e]}(),A=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),B=function(){return a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),C=p?" translateZ(0)":"",D=function(c,d){var e=this,l;e.wrapper=typeof c=="object"?c:b.getElementById(c);e.wrapper.style.overflow="hidden";e.scroller=e.wrapper.children[0];e.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:m,hideScrollbar:n,fadeScrollbar:n&&p,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in d)e.options[l]=d[l];e.x=e.options.x;e.y=e.options.y;e.options.useTransform=r&&e.options.useTransform;e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar;e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar;e.options.zoom=e.options.useTransform&&e.options.zoom;e.options.useTransition=s&&e.options.useTransition;if(e.options.zoom&&m){C=""}e.scroller.style[h]=e.options.useTransform?f+"transform":"top left";e.scroller.style[i]="0";e.scroller.style[j]="0 0";if(e.options.useTransition)e.scroller.style[k]="cubic-bezier(0.33,0.66,0.66,1)";if(e.options.useTransform)e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px)"+C;else e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px";if(e.options.useTransition)e.options.fixedScrollbar=true;e.refresh();e._bind(t,a);e._bind(u);if(!q){if(e.options.wheelAction!="none")e._bind(y)}if(e.options.checkDOMChanges)e.checkDOMTime=setInterval(function(){e._checkDOMChanges()},500)};D.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case u:if(!q&&a.button!==0)return;b._start(a);break;case v:b._move(a);break;case w:case x:b._end(a);break;case t:b._resize();break;case y:b._wheel(a);break;case z:b._transitionEnd(a);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(a){var d=this,e;if(!d[a+"Scrollbar"]){if(d[a+"ScrollbarWrapper"]){if(r)d[a+"ScrollbarIndicator"].style[g]="";d[a+"ScrollbarWrapper"].parentNode.removeChild(d[a+"ScrollbarWrapper"]);d[a+"ScrollbarWrapper"]=null;d[a+"ScrollbarIndicator"]=null}return}if(!d[a+"ScrollbarWrapper"]){e=b.createElement("div");if(d.options.scrollbarClass)e.className=d.options.scrollbarClass+a.toUpperCase();else e.style.cssText="position:absolute;z-index:100;"+(a=="h"?"height:7px;bottom:1px;left:2px;right:"+(d.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(d.hScrollbar?"7":"2")+"px;top:2px;right:1px");e.style.cssText+=";pointer-events:none;"+f+"transition-property:opacity;"+f+"transition-duration:"+(d.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(d.options.hideScrollbar?"0":"1");d.wrapper.appendChild(e);d[a+"ScrollbarWrapper"]=e;e=b.createElement("div");if(!d.options.scrollbarClass){e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+f+"background-clip:padding-box;"+f+"box-sizing:border-box;"+(a=="h"?"height:100%":"width:100%")+";"+f+"border-radius:3px;border-radius:3px"}e.style.cssText+=";pointer-events:none;"+f+"transition-property:"+f+"transform;"+f+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+f+"transition-duration:0;"+f+"transform: translate(0,0)"+C;if(d.options.useTransition)e.style.cssText+=";"+f+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";d[a+"ScrollbarWrapper"].appendChild(e);d[a+"ScrollbarIndicator"]=e}if(a=="h"){d.hScrollbarSize=d.hScrollbarWrapper.clientWidth;d.hScrollbarIndicatorSize=c.max(c.round(d.hScrollbarSize*d.hScrollbarSize/d.scrollerW),8);d.hScrollbarIndicator.style.width=d.hScrollbarIndicatorSize+"px";d.hScrollbarMaxScroll=d.hScrollbarSize-d.hScrollbarIndicatorSize;d.hScrollbarProp=d.hScrollbarMaxScroll/d.maxScrollX}else{d.vScrollbarSize=d.vScrollbarWrapper.clientHeight;d.vScrollbarIndicatorSize=c.max(c.round(d.vScrollbarSize*d.vScrollbarSize/d.scrollerH),8);d.vScrollbarIndicator.style.height=d.vScrollbarIndicatorSize+"px";d.vScrollbarMaxScroll=d.vScrollbarSize-d.vScrollbarIndicatorSize;d.vScrollbarProp=d.vScrollbarMaxScroll/d.maxScrollY}d._scrollbarPos(a,true)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},m?200:0)},_pos:function(a,b){if(this.zoomed)return;a=this.hScroll?a:0;b=this.vScroll?b:0;if(this.options.useTransform){this.scroller.style[g]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+C}else{a=c.round(a);b=c.round(b);this.scroller.style.left=a+"px";this.scroller.style.top=b+"px"}this.x=a;this.y=b;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(a,b){var d=this,e=a=="h"?d.x:d.y,f;if(!d[a+"Scrollbar"])return;e=d[a+"ScrollbarProp"]*e;if(e<0){if(!d.options.fixedScrollbar){f=d[a+"ScrollbarIndicatorSize"]+c.round(e*3);if(f<8)f=8;d[a+"ScrollbarIndicator"].style[a=="h"?"width":"height"]=f+"px"}e=0}else if(e>d[a+"ScrollbarMaxScroll"]){if(!d.options.fixedScrollbar){f=d[a+"ScrollbarIndicatorSize"]-c.round((e-d[a+"ScrollbarMaxScroll"])*3);if(f<8)f=8;d[a+"ScrollbarIndicator"].style[a=="h"?"width":"height"]=f+"px";e=d[a+"ScrollbarMaxScroll"]+(d[a+"ScrollbarIndicatorSize"]-f)}else{e=d[a+"ScrollbarMaxScroll"]}}d[a+"ScrollbarWrapper"].style[l]="0";d[a+"ScrollbarWrapper"].style.opacity=b&&d.options.hideScrollbar?"0":"1";d[a+"ScrollbarIndicator"].style[g]="translate("+(a=="h"?e+"px,0)":"0,"+e+"px)")+C},_start:function(b){var d=this,e=q?b.touches[0]:b,f,h,i,j,k;if(!d.enabled)return;if(d.options.onBeforeScrollStart)d.options.onBeforeScrollStart.call(d,b);if(d.options.useTransition||d.options.zoom)d._transitionTime(0);d.moved=false;d.animating=false;d.zoomed=false;d.distX=0;d.distY=0;d.absDistX=0;d.absDistY=0;d.dirX=0;d.dirY=0;if(d.options.zoom&&q&&b.touches.length>1){j=c.abs(b.touches[0].pageX-b.touches[1].pageX);k=c.abs(b.touches[0].pageY-b.touches[1].pageY);d.touchesDistStart=c.sqrt(j*j+k*k);d.originX=c.abs(b.touches[0].pageX+b.touches[1].pageX-d.wrapperOffsetLeft*2)/2-d.x;d.originY=c.abs(b.touches[0].pageY+b.touches[1].pageY-d.wrapperOffsetTop*2)/2-d.y;if(d.options.onZoomStart)d.options.onZoomStart.call(d,b)}if(d.options.momentum){if(d.options.useTransform){f=getComputedStyle(d.scroller,null)[g].replace(/[^0-9\-.,]/g,"").split(",");h=f[4]*1;i=f[5]*1}else{h=getComputedStyle(d.scroller,null).left.replace(/[^0-9-]/g,"")*1;i=getComputedStyle(d.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(h!=d.x||i!=d.y){if(d.options.useTransition)d._unbind(z);else B(d.aniTime);d.steps=[];d._pos(h,i)}}d.absStartX=d.x;d.absStartY=d.y;d.startX=d.x;d.startY=d.y;d.pointX=e.pageX;d.pointY=e.pageY;d.startTime=b.timeStamp||Date.now();if(d.options.onScrollStart)d.options.onScrollStart.call(d,b);d._bind(v,a);d._bind(w,a);d._bind(x,a)},_move:function(a){var b=this,d=q?a.touches[0]:a,e=d.pageX-b.pointX,f=d.pageY-b.pointY,h=b.x+e,i=b.y+f,j,k,l,m=a.timeStamp||Date.now();if(b.options.onBeforeScrollMove)b.options.onBeforeScrollMove.call(b,a);if(b.options.zoom&&q&&a.touches.length>1){j=c.abs(a.touches[0].pageX-a.touches[1].pageX);k=c.abs(a.touches[0].pageY-a.touches[1].pageY);b.touchesDist=c.sqrt(j*j+k*k);b.zoomed=true;l=1/b.touchesDistStart*b.touchesDist*this.scale;if(l<b.options.zoomMin)l=.5*b.options.zoomMin*Math.pow(2,l/b.options.zoomMin);else if(l>b.options.zoomMax)l=2*b.options.zoomMax*Math.pow(.5,b.options.zoomMax/l);b.lastScale=l/this.scale;h=this.originX-this.originX*b.lastScale+this.x,i=this.originY-this.originY*b.lastScale+this.y;this.scroller.style[g]="translate("+h+"px,"+i+"px) scale("+l+")"+C;if(b.options.onZoom)b.options.onZoom.call(b,a);return}b.pointX=d.pageX;b.pointY=d.pageY;if(h>0||h<b.maxScrollX){h=b.options.bounce?b.x+e/2:h>=0||b.maxScrollX>=0?0:b.maxScrollX}if(i>b.minScrollY||i<b.maxScrollY){i=b.options.bounce?b.y+f/2:i>=b.minScrollY||b.maxScrollY>=0?b.minScrollY:b.maxScrollY}b.distX+=e;b.distY+=f;b.absDistX=c.abs(b.distX);b.absDistY=c.abs(b.distY);if(b.absDistX<6&&b.absDistY<6){return}if(b.options.lockDirection){if(b.absDistX>b.absDistY+5){i=b.y;f=0}else if(b.absDistY>b.absDistX+5){h=b.x;e=0}}b.moved=true;b._pos(h,i);b.dirX=e>0?-1:e<0?1:0;b.dirY=f>0?-1:f<0?1:0;if(m-b.startTime>300){b.startTime=m;b.startX=b.x;b.startY=b.y}if(b.options.onScrollMove)b.options.onScrollMove.call(b,a)},_end:function(d){if(q&&d.touches.length!==0)return;var e=this,f=q?d.changedTouches[0]:d,h,j,k={dist:0,time:0},l={dist:0,time:0},m=(d.timeStamp||Date.now())-e.startTime,n=e.x,o=e.y,p,r,s,t,u;e._unbind(v,a);e._unbind(w,a);e._unbind(x,a);if(e.options.onBeforeScrollEnd)e.options.onBeforeScrollEnd.call(e,d);if(e.zoomed){u=e.scale*e.lastScale;u=Math.max(e.options.zoomMin,u);u=Math.min(e.options.zoomMax,u);e.lastScale=u/e.scale;e.scale=u;e.x=e.originX-e.originX*e.lastScale+e.x;e.y=e.originY-e.originY*e.lastScale+e.y;e.scroller.style[i]="200ms";e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px) scale("+e.scale+")"+C;e.zoomed=false;e.refresh();if(e.options.onZoomEnd)e.options.onZoomEnd.call(e,d);return}if(!e.moved){if(q){if(e.doubleTapTimer&&e.options.zoom){clearTimeout(e.doubleTapTimer);e.doubleTapTimer=null;if(e.options.onZoomStart)e.options.onZoomStart.call(e,d);e.zoom(e.pointX,e.pointY,e.scale==1?e.options.doubleTapZoom:1);if(e.options.onZoomEnd){setTimeout(function(){e.options.onZoomEnd.call(e,d)},200)}}else if(this.options.handleClick){e.doubleTapTimer=setTimeout(function(){e.doubleTapTimer=null;h=f.target;while(h.nodeType!=1)h=h.parentNode;if(h.tagName!="SELECT"&&h.tagName!="INPUT"&&h.tagName!="TEXTAREA"){j=b.createEvent("MouseEvents");j.initMouseEvent("click",true,true,d.view,1,f.screenX,f.screenY,f.clientX,f.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null);j._fake=true;h.dispatchEvent(j)}},e.options.zoom?250:0)}}e._resetPos(400);if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,d);return}if(m<300&&e.options.momentum){k=n?e._momentum(n-e.startX,m,-e.x,e.scrollerW-e.wrapperW+e.x,e.options.bounce?e.wrapperW:0):k;l=o?e._momentum(o-e.startY,m,-e.y,e.maxScrollY<0?e.scrollerH-e.wrapperH+e.y-e.minScrollY:0,e.options.bounce?e.wrapperH:0):l;n=e.x+k.dist;o=e.y+l.dist;if(e.x>0&&n>0||e.x<e.maxScrollX&&n<e.maxScrollX)k={dist:0,time:0};if(e.y>e.minScrollY&&o>e.minScrollY||e.y<e.maxScrollY&&o<e.maxScrollY)l={dist:0,time:0}}if(k.dist||l.dist){s=c.max(c.max(k.time,l.time),10);if(e.options.snap){p=n-e.absStartX;r=o-e.absStartY;if(c.abs(p)<e.options.snapThreshold&&c.abs(r)<e.options.snapThreshold){e.scrollTo(e.absStartX,e.absStartY,200)}else{t=e._snap(n,o);n=t.x;o=t.y;s=c.max(t.time,s)}}e.scrollTo(c.round(n),c.round(o),s);if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,d);return}if(e.options.snap){p=n-e.absStartX;r=o-e.absStartY;if(c.abs(p)<e.options.snapThreshold&&c.abs(r)<e.options.snapThreshold)e.scrollTo(e.absStartX,e.absStartY,200);else{t=e._snap(e.x,e.y);if(t.x!=e.x||t.y!=e.y)e.scrollTo(t.x,t.y,t.time)}if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,d);return}e._resetPos(200);if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,d)},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;if(c==b.x&&d==b.y){if(b.moved){b.moved=false;if(b.options.onScrollEnd)b.options.onScrollEnd.call(b)}if(b.hScrollbar&&b.options.hideScrollbar){if(e=="webkit")b.hScrollbarWrapper.style[l]="300ms";b.hScrollbarWrapper.style.opacity="0"}if(b.vScrollbar&&b.options.hideScrollbar){if(e=="webkit")b.vScrollbarWrapper.style[l]="300ms";b.vScrollbarWrapper.style.opacity="0"}return}b.scrollTo(c,d,a||0)},_wheel:function(a){var b=this,c,d,e,f,g;if("wheelDeltaX"in a){c=a.wheelDeltaX/12;d=a.wheelDeltaY/12}else if("wheelDelta"in a){c=d=a.wheelDelta/12}else if("detail"in a){c=d=-a.detail*3}else{return}if(b.options.wheelAction=="zoom"){g=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0));if(g<b.options.zoomMin)g=b.options.zoomMin;if(g>b.options.zoomMax)g=b.options.zoomMax;if(g!=b.scale){if(!b.wheelZoomCount&&b.options.onZoomStart)b.options.onZoomStart.call(b,a);b.wheelZoomCount++;b.zoom(a.pageX,a.pageY,g,400);setTimeout(function(){b.wheelZoomCount--;if(!b.wheelZoomCount&&b.options.onZoomEnd)b.options.onZoomEnd.call(b,a)},400)}return}e=b.x+c;f=b.y+d;if(e>0)e=0;else if(e<b.maxScrollX)e=b.maxScrollX;if(f>b.minScrollY)f=b.minScrollY;else if(f<b.maxScrollY)f=b.maxScrollY;if(b.maxScrollY<0){b.scrollTo(e,f,0)}},_transitionEnd:function(a){var b=this;if(a.target!=b.scroller)return;b._unbind(z);b._startAni()},_startAni:function(){var a=this,b=a.x,d=a.y,e=Date.now(),f,g,h;if(a.animating)return;if(!a.steps.length){a._resetPos(400);return}f=a.steps.shift();if(f.x==b&&f.y==d)f.time=0;a.animating=true;a.moved=true;if(a.options.useTransition){a._transitionTime(f.time);a._pos(f.x,f.y);a.animating=false;if(f.time)a._bind(z);else a._resetPos(0);return}h=function(){var i=Date.now(),j,k;if(i>=e+f.time){a._pos(f.x,f.y);a.animating=false;if(a.options.onAnimationEnd)a.options.onAnimationEnd.call(a);a._startAni();return}i=(i-e)/f.time-1;g=c.sqrt(1-i*i);j=(f.x-b)*g+b;k=(f.y-d)*g+d;a._pos(j,k);if(a.animating)a.aniTime=A(h)};h()},_transitionTime:function(a){a+="ms";this.scroller.style[i]=a;if(this.hScrollbar)this.hScrollbarIndicator.style[i]=a;if(this.vScrollbar)this.vScrollbarIndicator.style[i]=a},_momentum:function(a,b,d,e,f){var g=6e-4,h=c.abs(a)/b,i=h*h/(2*g),j=0,k=0;if(a>0&&i>d){k=f/(6/(i/h*g));d=d+k;h=h*d/i;i=d}else if(a<0&&i>e){k=f/(6/(i/h*g));e=e+k;h=h*e/i;i=e}i=i*(a<0?-1:1);j=h/g;return{dist:i,time:c.round(j)}},_offset:function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent){b-=a.offsetLeft;c-=a.offsetTop}if(a!=this.wrapper){b*=this.scale;c*=this.scale}return{left:b,top:c}},_snap:function(a,b){var d=this,e,f,g,h,i,j;g=d.pagesX.length-1;for(e=0,f=d.pagesX.length;e<f;e++){if(a>=d.pagesX[e]){g=e;break}}if(g==d.currPageX&&g>0&&d.dirX<0)g--;a=d.pagesX[g];i=c.abs(a-d.pagesX[d.currPageX]);i=i?c.abs(d.x-a)/i*500:0;d.currPageX=g;g=d.pagesY.length-1;for(e=0;e<g;e++){if(b>=d.pagesY[e]){g=e;break}}if(g==d.currPageY&&g>0&&d.dirY<0)g--;b=d.pagesY[g];j=c.abs(b-d.pagesY[d.currPageY]);j=j?c.abs(d.y-b)/j*500:0;d.currPageY=g;h=c.round(c.max(i,j))||200;return{x:a,y:b,time:h}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var b=this;b.scroller.style[g]="";b.hScrollbar=false;b.vScrollbar=false;b._scrollbar("h");b._scrollbar("v");b._unbind(t,a);b._unbind(u);b._unbind(v,a);b._unbind(w,a);b._unbind(x,a);if(!b.options.hasTouch){b._unbind(y)}if(b.options.useTransition)b._unbind(z);if(b.options.checkDOMChanges)clearInterval(b.checkDOMTime);if(b.options.onDestroy)b.options.onDestroy.call(b)},refresh:function(){var a=this,b,d,e,f,g=0,h=0;if(a.scale<a.options.zoomMin)a.scale=a.options.zoomMin;a.wrapperW=a.wrapper.clientWidth||1;a.wrapperH=a.wrapper.clientHeight||1;a.minScrollY=-a.options.topOffset||0;a.scrollerW=c.round(a.scroller.offsetWidth*a.scale);a.scrollerH=c.round((a.scroller.offsetHeight+a.minScrollY)*a.scale);a.maxScrollX=a.wrapperW-a.scrollerW;a.maxScrollY=a.wrapperH-a.scrollerH+a.minScrollY;a.dirX=0;a.dirY=0;if(a.options.onRefresh)a.options.onRefresh.call(a);a.hScroll=a.options.hScroll&&a.maxScrollX<0;a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH);a.hScrollbar=a.hScroll&&a.options.hScrollbar;a.vScrollbar=a.vScroll&&a.options.vScrollbar&&a.scrollerH>a.wrapperH;b=a._offset(a.wrapper);a.wrapperOffsetLeft=-b.left;a.wrapperOffsetTop=-b.top;if(typeof a.options.snap=="string"){a.pagesX=[];a.pagesY=[];f=a.scroller.querySelectorAll(a.options.snap);for(d=0,e=f.length;d<e;d++){g=a._offset(f[d]);g.left+=a.wrapperOffsetLeft;g.top+=a.wrapperOffsetTop;a.pagesX[d]=g.left<a.maxScrollX?a.maxScrollX:g.left*a.scale;a.pagesY[d]=g.top<a.maxScrollY?a.maxScrollY:g.top*a.scale}}else if(a.options.snap){a.pagesX=[];while(g>=a.maxScrollX){a.pagesX[h]=g;g=g-a.wrapperW;h++}if(a.maxScrollX%a.wrapperW)a.pagesX[a.pagesX.length]=a.maxScrollX-a.pagesX[a.pagesX.length-1]+a.pagesX[a.pagesX.length-1];g=0;h=0;a.pagesY=[];while(g>=a.maxScrollY){a.pagesY[h]=g;g=g-a.wrapperH;h++}if(a.maxScrollY%a.wrapperH)a.pagesY[a.pagesY.length]=a.maxScrollY-a.pagesY[a.pagesY.length-1]+a.pagesY[a.pagesY.length-1]}a._scrollbar("h");a._scrollbar("v");if(!a.zoomed){a.scroller.style[i]="0";a._resetPos(400)}},scrollTo:function(a,b,c,d){var e=this,f=a,g,h;e.stop();if(!f.length)f=[{x:a,y:b,time:c,relative:d}];for(g=0,h=f.length;g<h;g++){if(f[g].relative){f[g].x=e.x-f[g].x;f[g].y=e.y-f[g].y}e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0})}e._startAni()},scrollToElement:function(a,b){var d=this,e;a=a.nodeType?a:d.scroller.querySelector(a);if(!a)return;e=d._offset(a);e.left+=d.wrapperOffsetLeft;e.top+=d.wrapperOffsetTop;e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left;e.top=e.top>d.minScrollY?d.minScrollY:e.top<d.maxScrollY?d.maxScrollY:e.top;b=b===undefined?c.max(c.abs(e.left)*2,c.abs(e.top)*2):b;d.scrollTo(e.left,e.top,b)},scrollToPage:function(a,b,c){var d=this,e,f;c=c===undefined?400:c;if(d.options.onScrollStart)d.options.onScrollStart.call(d);if(d.options.snap){a=a=="next"?d.currPageX+1:a=="prev"?d.currPageX-1:a;b=b=="next"?d.currPageY+1:b=="prev"?d.currPageY-1:b;a=a<0?0:a>d.pagesX.length-1?d.pagesX.length-1:a;b=b<0?0:b>d.pagesY.length-1?d.pagesY.length-1:b;d.currPageX=a;d.currPageY=b;e=d.pagesX[a];f=d.pagesY[b]}else{e=-d.wrapperW*a;f=-d.wrapperH*b;if(e<d.maxScrollX)e=d.maxScrollX;if(f<d.maxScrollY)f=d.maxScrollY}d.scrollTo(e,f,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(v,a);this._unbind(w,a);this._unbind(x,a)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition)this._unbind(z);else B(this.aniTime);this.steps=[];this.moved=false;this.animating=false},zoom:function(a,b,c,d){var e=this,f=c/e.scale;if(!e.options.useTransform)return;e.zoomed=true;d=d===undefined?200:d;a=a-e.wrapperOffsetLeft-e.x;b=b-e.wrapperOffsetTop-e.y;e.x=a-a*f+e.x;e.y=b-b*f+e.y;e.scale=c;e.refresh();e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x;e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y;e.scroller.style[i]=d+"ms";e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+C;e.zoomed=false},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};d=null;if(typeof exports!=="undefined")exports.iScroll=D;else a.iScroll=D})(window,document);function getScrollBarWidth(){var inner=document.createElement('p');inner.style.width="100%";inner.style.height="200px";var outer=document.createElement('div');outer.style.position="absolute";outer.style.top="0px";outer.style.left="0px";outer.style.visibility="hidden";outer.style.width="200px";outer.style.height="150px";outer.style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow='scroll';var w2=inner.offsetWidth;if(w1==w2)w2=outer.clientWidth;document.body.removeChild(outer);return(w1-w2);};$(document).ready(function(){if(!Modernizr.input.placeholder){$('[placeholder]').each(function(){var input=$(this);input.addClass('placeholder');input.val(input.attr('placeholder'));});$('[placeholder]').focus(function(){var input=$(this);if(input.val()==input.attr('placeholder')){input.val('');input.removeClass('placeholder');}});$('[placeholder]').blur(function(){var input=$(this);if(input.val()==''||input.val()==input.attr('placeholder')){input.addClass('placeholder');input.val(input.attr('placeholder'));}});$('[placeholder]').parents('form').submit(function(){$(this).find('[placeholder]').each(function(){var input=$(this);if(input.val()==input.attr('placeholder')){input.val('');}});});}
window.resizeAll=new Function();$('#header_content hgroup').css('cursor','pointer').click(function(e){e.preventDefault();jUri.redirect('http://www.matriceriaymoldes.es');});$('#photo-frame img').bind('contextmenu dragstart',function(e){e.preventDefault();return false;});$('#mainSection').bind('dragstart selectstart mousedown',function(e){if($(e.target).get(0).tagName.toLowerCase()!='a'&&$(e.target).get(0).tagName.toLowerCase()!='input'&&$(e.target).get(0).tagName.toLowerCase()!='textarea'&&!$(e.target).hasClass('fb_icon')&&!$(e.target).hasClass('link_icon')&&!$(e.target).hasClass('no-script')){e.preventDefault();return false;}});$('a').click(function(e){var target=$(this).attr('target'),href=$(this).attr('href');if(href.match(/^http/gim)&&target!='_blank'){e.preventDefault();window.open(href);}});var myScroll=new iScroll('small-screen-scroller',{hScrollbar:false,vScrollbar:false,vScroll:false,bounce:false});$('#menu-icon, #menu-button').click(function(e){$('#menu-icon').toggleClass('open');if($('#small-menu-elements').css('display')=='none'){$('#small-menu-elements').css('display','block');}else{$('#small-menu-elements').css('display','none')}});});(function(win){var doc=win.document;if(!location.hash&&win.addEventListener){window.scrollTo(0,1);var scrollTop=1,getScrollTop=function(){return win.pageYOffset||doc.compatMode==="CSS1Compat"&&doc.documentElement.scrollTop||doc.body.scrollTop||0;},bodycheck=setInterval(function(){if(doc.body){clearInterval(bodycheck);scrollTop=getScrollTop();win.scrollTo(0,scrollTop===1?0:1);}},15);win.addEventListener("load",function(){setTimeout(function(){if(getScrollTop()<20){win.scrollTo(0,scrollTop===1?0:1);}},0);});}})(this);;$(document).ready(function(){$('#empresas_tweets').load('/widgets/twitter.php?tweets_number=2',function(){window.resizeAll();});$('#main_tweets').load('/widgets/twitter.php?tweets_number=4',function(){window.resizeAll();});});